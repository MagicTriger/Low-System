put:
  tags:
    - 菜单管理
  summary: 更新菜单
  description: |
    更新指定的菜单项信息。

    **认证**: 需要Bearer Token + 权限: `menu:update`

    **注意事项**:
    - 不能修改菜单编码（menuCode）
    - 修改父菜单时需确保不会形成循环引用
    - 修改节点类型时需确保符合业务规则
  operationId: updateMenu
  security:
    - bearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../../schemas/menu.yaml#/MenuUpdateRequest'
        examples:
          updateName:
            summary: 更新菜单名称
            value:
              id: 3
              menuCode: user
              name: 用户管理（新）
              module: admin
              nodeType: 2
              sortOrder: 0
              url: /system/user
              icon: user
              path: /admin/system/user
          updateParent:
            summary: 更改父菜单
            value:
              id: 3
              parentId: 5
              menuCode: user
              name: 用户管理
              module: admin
              nodeType: 2
              sortOrder: 0
              url: /system/user
              icon: user
              path: /admin/system/user
  responses:
    '200':
      description: 更新成功
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../schemas/common.yaml#/SuccessResponse'
              - type: object
                properties:
                  data:
                    $ref: '../../schemas/menu.yaml#/MenuResource'
          examples:
            success:
              summary: 更新成功
              value:
                success: true
                code: 200
                message: 更新成功
                data:
                  id: 3
                  parentId: 2
                  menuCode: user
                  name: 用户管理（新）
                  module: admin
                  nodeType: 2
                  sortOrder: 0
                  url: /system/user
                  icon: user
                  path: /admin/system/user
                  enabled: true
                  visible: true
                  createdAt: '2024-01-01T00:00:00Z'
                  updatedAt: '2024-01-02T00:00:00Z'
    '400':
      description: 请求参数错误
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
          examples:
            invalidParams:
              summary: 参数错误
              value:
                success: false
                code: 400
                message: 请求参数错误
                errors:
                  - field: name
                    message: 菜单名称不能为空
            circularReference:
              summary: 循环引用
              value:
                success: false
                code: 400
                message: 不能将菜单移动到其子菜单下，会形成循环引用
    '403':
      description: 权限不足
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
    '404':
      description: 菜单不存在
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
    '409':
      description: 菜单编码冲突
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
