post:
  tags:
    - 认证与授权
  summary: 用户登录
  description: |
    使用用户名和密码进行登录，成功后返回访问令牌和用户信息。

    **限流**: 5次/分钟
  operationId: login
  security: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../../schemas/auth.yaml#/LoginRequest'
        examples:
          admin:
            summary: 管理员登录
            value:
              username: admin
              password: admin123
          user:
            summary: 普通用户登录
            value:
              username: user
              password: user123
  responses:
    '200':
      description: 登录成功
      content:
        application/json:
          schema:
            $ref: '../../schemas/auth.yaml#/LoginResponse'
          examples:
            success:
              summary: 登录成功
              value:
                success: true
                code: 200
                message: 登录成功
                data:
                  accessToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  tokenType: Bearer
                  expiresIn: 7200
                  refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  userInfo:
                    userId: 1001
                    username: admin
                    displayName: 管理员
                    email: admin@example.com
                    avatar: https://example.com/avatar.jpg
                    enabled: true
                    createdAt: '2024-01-01T00:00:00Z'
                  permissionInfo:
                    roleIds: [1]
                    roleNames: ['管理员']
                    permissions: ['*']
                    menus: []
    '400':
      description: 请求参数错误
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
          examples:
            invalidParams:
              summary: 参数错误
              value:
                success: false
                code: 400
                message: 请求参数错误
                errors:
                  - field: username
                    message: 用户名不能为空
    '401':
      description: 认证失败
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
          examples:
            wrongCredentials:
              summary: 用户名或密码错误
              value:
                success: false
                code: 401
                message: 用户名或密码错误
    '429':
      description: 请求过于频繁
      content:
        application/json:
          schema:
            $ref: '../../schemas/common.yaml#/ErrorResponse'
          examples:
            rateLimitExceeded:
              summary: 超过限流
              value:
                success: false
                code: 429
                message: 请求过于频繁，请稍后再试
