import{d as H,bS as M,b_ as T,f as D,h as a,o as W,b as q,bo as d,bp as i,bE as t,bz as k,bF as v,z as m,V as y,u as c,by as L,bt as O,bq as X,I as C,bW as j,bX as E}from"./vendor.BT0Of-np.js";import{_ as I,d as A}from"./index.MMW6Q6l4.js";import{I as g}from"./Icon.BM9XfUDI.js";import"./antdv.B3VvJiRs.js";/* empty css                                                             */const G=I(A,[["__scopeId","data-v-325ac5c6"]]),J={class:"preview-container"},K={class:"preview-header"},Q={class:"header-left"},Y={class:"preview-id"},Z={class:"header-right"},ee={key:1,class:"loading-container"},te={key:2,class:"error-container"},oe={key:0,class:"preview-toolbar"},le={class:"toolbar-section"},ne={key:0,class:"toolbar-section"},se={class:"toolbar-section"},ae=H({__name:"Preview",setup(ie){const F=M(),N=T(),r=D(()=>F.params.id),b=a(null),h=a(!0),p=a(null),n=a(!1),s=a("desktop"),u=a("portrait"),f=a(1200),w=a(800),P={desktop:{width:1200,height:800},tablet:{width:768,height:1024},mobile:{width:375,height:667}},$=D(()=>{let o,e;if(s.value==="custom")o=f.value,e=w.value;else{const l=P[s.value];o=l.width,e=l.height}return u.value==="landscape"&&s.value!=="desktop"&&([o,e]=[e,o]),{width:`${o}px`,height:`${e}px`,maxWidth:n.value?"100vw":"100%",maxHeight:n.value?"100vh":"100%"}}),_=async()=>{try{h.value=!0,p.value=null,await new Promise(o=>setTimeout(o,1e3)),b.value={id:r.value,title:`页面 ${r.value}`,components:[{id:"root",type:"Container",props:{className:"min-h-screen bg-gray-50 p-4"},children:[{id:"header",type:"Header",props:{title:"预览页面",subtitle:"这是一个示例页面"}},{id:"content",type:"Container",props:{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},children:[{id:"card1",type:"Card",props:{title:"卡片 1",content:"这是第一个卡片的内容"}},{id:"card2",type:"Card",props:{title:"卡片 2",content:"这是第二个卡片的内容"}},{id:"card3",type:"Card",props:{title:"卡片 3",content:"这是第三个卡片的内容"}}]}]}],meta:{title:`页面 ${r.value}`,description:"预览页面描述"}}}catch(o){p.value=o instanceof Error?o.message:"加载页面数据失败"}finally{h.value=!1}},B=()=>{var o,e,l;n.value=!n.value,n.value?(e=(o=document.documentElement).requestFullscreen)==null||e.call(o):(l=document.exitFullscreen)==null||l.call(document)},S=()=>{N.push(`/designer/${r.value}`)},z=()=>{s.value!=="desktop"&&(u.value="portrait")},R=()=>{s.value!=="desktop"&&(u.value=u.value==="portrait"?"landscape":"portrait")},x=()=>{},U=o=>{console.log("Preview component clicked:",o)},V=()=>{document.fullscreenElement||(n.value=!1)};return W(()=>{_(),document.addEventListener("fullscreenchange",V)}),q(()=>{document.removeEventListener("fullscreenchange",V)}),(o,e)=>(i(),d("div",J,[t("div",K,[t("div",Q,[e[3]||(e[3]=t("h1",{class:"preview-title"},"页面预览",-1)),t("span",Y,"ID: "+v(r.value),1)]),t("div",Z,[t("button",{onClick:B,class:"btn-fullscreen"},[m(c(g),{name:"fullscreen"}),y(" "+v(n.value?"退出全屏":"全屏预览"),1)]),t("button",{onClick:S,class:"btn-back"},[m(c(g),{name:"arrow-left"}),e[4]||(e[4]=y(" 返回编辑 "))])])]),t("div",{class:X(["preview-content",{fullscreen:n.value}])},[t("div",{class:"preview-viewport",style:L($.value)},[b.value?(i(),O(c(G),{key:0,page:b.value,mode:"preview",onComponentClick:U},null,8,["page"])):h.value?(i(),d("div",ee,e[5]||(e[5]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"正在加载页面...",-1)]))):p.value?(i(),d("div",te,[m(c(g),{name:"error",class:"error-icon"}),e[6]||(e[6]=t("h3",null,"加载失败",-1)),t("p",null,v(p.value),1),t("button",{onClick:_,class:"btn-retry"},"重试")])):k("",!0)],4)],2),n.value?k("",!0):(i(),d("div",oe,[t("div",le,[e[8]||(e[8]=t("label",null,"设备预览:",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value=l),onChange:z},e[7]||(e[7]=[t("option",{value:"desktop"},"桌面端",-1),t("option",{value:"tablet"},"平板",-1),t("option",{value:"mobile"},"手机",-1),t("option",{value:"custom"},"自定义",-1)]),544),[[j,s.value]])]),s.value==="custom"?(i(),d("div",ne,[e[9]||(e[9]=t("label",null,"宽度:",-1)),C(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),type:"number",min:"320",max:"1920",onChange:x},null,544),[[E,f.value,void 0,{number:!0}]]),e[10]||(e[10]=t("label",null,"高度:",-1)),C(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>w.value=l),type:"number",min:"480",max:"1080",onChange:x},null,544),[[E,w.value,void 0,{number:!0}]])])):k("",!0),t("div",se,[t("button",{onClick:R,class:"btn-orientation"},[m(c(g),{name:"rotate"}),y(" "+v(u.value==="portrait"?"横屏":"竖屏"),1)])])]))]))}}),ve=I(ae,[["__scopeId","data-v-0131f83d"]]);export{ve as default};
