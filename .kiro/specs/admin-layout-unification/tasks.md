# 管理端界面框架统一 - 任务列表

## 任务概述

将管理端和设计端的界面框架统一,通过创建可配置的共享布局组件实现代码复用。

## 任务列表

- [x] 1. 创建共享布局基础设施

  - 创建 `src/core/layout/` 目录结构
  - 定义布局相关的 TypeScript 类型和接口
  - 创建布局配置的类型定义文件
  - _需求: 1.1, 6.1_

- [x] 2. 实现 BaseLayout 基础布局组件

  - [x] 2.1 创建 BaseLayout.vue 组件骨架

    - 实现基础的 Layout 结构 (Header + Sider + Content)
    - 接收配置 Props
    - 定义插槽 (header-left, header-right, sidebar-top, sidebar-bottom, default)
    - 实现响应式布局逻辑
    - _需求: 1.1, 1.2, 9.1_

  - [ ] 2.2 实现折叠/展开功能

    - 添加 collapsed 状态管理
    - 实现侧边栏折叠动画

    - 处理内容区域的自适应

    - _需求: 3.2, 9.3_

  - [ ] 2.3 添加样式和主题支持
    - 使用 CSS 变量定义主题色
    - 实现 Dashgum 风格样式
    - 添加响应式样式
    - _需求: 8.1, 8.2, 9.1_

- [x] 3. 实现 AppHeader 头部组件

  - [ ] 3.1 创建 AppHeader.vue 组件

    - 实现头部布局结构
    - 添加侧边栏切换按钮
    - 添加标题显示
    - 实现右侧操作区域

    - _需求: 2.1, 2.2_

  - [ ] 3.2 实现头部功能按钮

    - 添加图标库按钮 (可配置)

    - 添加通知按钮 (可配置)
    - 添加设置按钮 (可配置)
    - 实现按钮点击事件
    - _需求: 2.3, 6.2_

  - [x] 3.3 集成 UserDropdown 组件

    - 显示用户头像和名称
    - 实现下拉菜单
    - 处理用户操作事件 (个人中心、设置、退出登录)
    - _需求: 2.2, 2.4_

- [ ] 4. 实现 AppSidebar 侧边栏组件

  - [ ] 4.1 创建 AppSidebar.vue 组件

    - 实现侧边栏布局结构
    - 添加用户信息区域 (可配置)
    - 集成 DynamicMenu 组件

    - 实现滚动条样式

    - _需求: 3.1, 3.2_

  - [ ] 4.2 实现用户信息显示
    - 显示用户头像
    - 显示用户名称
    - 处理折叠状态下的显示
    - 添加淡入淡出动画
    - _需求: 3.2, 3.3_

- [x] 5. 实现 DynamicMenu 动态菜单组件

  - [ ] 5.1 创建 DynamicMenu.vue 组件

    - 接收菜单树数据

    - 递归渲染多级菜单

    - 支持图标显示

    - 实现菜单选中状态
    - _需求: 3.1, 3.3, 3.4_

  - [x] 5.2 实现菜单交互

    - 处理菜单点击事件
    - 实现路由跳转
    - 同步路由和菜单选中状态
    - 添加菜单展开/收起动画
    - _需求: 3.2, 3.4, 7.2_

  - [ ] 5.3 添加权限控制

    - 根据权限过滤菜单项
    - 隐藏无权限的菜单
    - 处理权限变更

    - _需求: 3.3, 7.4_

- [-] 6. 实现 UserDropdown 用户下拉菜单组件

  - 创建 UserDropdown.vue 组件

  - 显示用户头像和名称

  - 实现下拉菜单项 (个人中心、设置、退出登录)

  - 处理菜单项点击事件
  - 添加图标支持

  - _需求: 2.2, 2.4_

- [ ] 7. 实现 AppLogo Logo 组件

  - 创建 AppLogo.vue 组件
  - 显示应用 Logo
  - 支持折叠状态下的显示

  - 添加点击跳转首页功能
  - _需求: 3.1_

- [ ] 8. 创建布局配置文件

  - [ ] 8.1 创建设计端配置

    - 创建 `src/modules/designer/config/layout.ts`
    - 定义设计端布局配置

    - 配置头部、侧边栏、主题

    - _需求: 6.1, 6.2_

  - [x] 8.2 创建管理端配置

    - 创建 `src/modules/admin/config/layout.ts`

    - 定义管理端布局配置
    - 配置头部、侧边栏、主题
    - _需求: 6.1, 6.2_

- [ ] 9. 迁移管理端到新布局

  - [ ] 9.1 更新管理端 Layout.vue

    - 导入 BaseLayout 组件
    - 传入管理端配置
    - 处理菜单数据加载
    - 删除旧的布局代码
    - _需求: 1.1, 4.1, 5.1_

  - [ ] 9.2 删除管理端重复组件

    - 删除 `src/modules/admin/components/AppHeader.vue`
    - 删除 `src/modules/admin/components/AppLogo.vue`

    - 删除 `src/modules/admin/components/DynamicMenu.vue`

    - 删除 `src/modules/admin/components/AppFooter.vue`
    - _需求: 4.1, 4.2_

  - [ ] 9.3 测试管理端功能
    - 测试页面渲染
    - 测试菜单导航
    - 测试用户操作
    - 测试响应式布局
    - _需求: 5.1, 5.2, 9.1_

- [ ] 10. 迁移设计端到新布局

  - [ ] 10.1 更新设计端 Layout.vue
    - 导入 BaseLayout 组件
    - 传入设计端配置
    - 处理菜单数据
    - 删除旧的布局代码
    - _需求: 1.1, 4.1, 5.1_
  - [ ] 10.2 测试设计端功能
    - 测试页面渲染
    - 测试菜单导航
    - 测试图标库功能
    - 测试响应式布局
    - _需求: 5.1, 5.2, 9.1_

- [ ] 11. 优化和完善

  - [ ] 11.1 性能优化
    - 实现组件懒加载
    - 优化菜单渲染性能
    - 添加菜单数据缓存
    - 优化动画性能
    - _需求: 10.1, 10.2_
  - [ ] 11.2 样式优化
    - 统一样式变量
    - 优化响应式断点
    - 添加过渡动画
    - 优化移动端体验
    - _需求: 8.1, 8.3, 9.1_
  - [ ] 11.3 错误处理
    - 添加菜单加载失败处理
    - 添加路由跳转失败处理
    - 添加用户操作错误提示
    - _需求: 5.2_

- [ ] 12. 文档和测试

  - [ ] 12.1 编写组件文档
    - 编写 BaseLayout API 文档
    - 编写配置指南
    - 编写迁移指南
    - 编写最佳实践
    - _需求: 6.4_
  - [ ]\* 12.2 编写单元测试
    - 测试 BaseLayout 组件
    - 测试 AppHeader 组件
    - 测试 AppSidebar 组件
    - 测试 DynamicMenu 组件
    - _需求: 5.1_
  - [ ]\* 12.3 编写集成测试
    - 测试设计端完整流程
    - 测试管理端完整流程
    - 测试路由导航
    - 测试权限控制
    - _需求: 5.2_

- [ ] 13. 清理和发布
  - 删除重复的样式文件
  - 更新相关文档
  - 代码审查
  - 合并到主分支
  - _需求: 4.1, 4.3_

## 任务依赖关系

```
1 (基础设施)
  ↓
2 (BaseLayout) ← 8 (配置文件)
  ↓
├─→ 3 (AppHeader) → 6 (UserDropdown)
├─→ 4 (AppSidebar) → 7 (AppLogo)
│       ↓
│   5 (DynamicMenu)
↓
9 (迁移管理端)
  ↓
10 (迁移设计端)
  ↓
11 (优化)
  ↓
12 (文档和测试)
  ↓
13 (清理和发布)
```

## 预估工作量

- 任务 1-2: 4 小时
- 任务 3-7: 8 小时
- 任务 8: 1 小时
- 任务 9: 3 小时
- 任务 10: 2 小时
- 任务 11: 4 小时
- 任务 12: 4 小时
- 任务 13: 1 小时

**总计**: 约 27 小时

## 里程碑

1. **M1 - 共享组件完成** (任务 1-7): 完成所有共享布局组件的开发
2. **M2 - 管理端迁移完成** (任务 8-9): 管理端成功迁移到新布局
3. **M3 - 设计端迁移完成** (任务 10): 设计端成功迁移到新布局
4. **M4 - 项目完成** (任务 11-13): 优化、测试、文档完成,项目发布
