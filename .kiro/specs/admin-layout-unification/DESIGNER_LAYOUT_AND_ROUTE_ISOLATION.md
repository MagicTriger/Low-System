# è®¾è®¡ç«¯å¸ƒå±€æ›´æ–°å’Œè·¯ç”±éš”ç¦»

## ğŸ¯ æ›´æ–°å†…å®¹

æ ¹æ®ç”¨æˆ·éœ€æ±‚,å®Œæˆä»¥ä¸‹ä¿®æ”¹:

1. âœ… **è®¾è®¡ç«¯ä¾§è¾¹æ æ ‡é¢˜æ”¹ä¸º"èµ„æºç®¡ç†"**
2. âœ… **ä¾§è¾¹æ å’Œé¡¶éƒ¨å¯¼èˆªæ æ”¹ä¸ºç®¡ç†ç«¯èƒŒæ™¯è‰²** (#2f4050)
3. âœ… **ä¾§è¾¹æ æ·»åŠ ç”¨æˆ·å¤´åƒæ˜¾ç¤º**
4. âœ… **è®¾è®¡ç«¯å’Œç®¡ç†ç«¯è·¯ç”±å®Œå…¨éš”ç¦»**

---

## ğŸ“ è¯¦ç»†ä¿®æ”¹

### 1. è®¾è®¡ç«¯å¸ƒå±€é…ç½®æ›´æ–°

**æ–‡ä»¶**: `src/modules/designer/config/layout.ts`

#### ä¿®æ”¹å†…å®¹:

```typescript
// å¤´éƒ¨æ ‡é¢˜
header: {
  title: 'èµ„æºç®¡ç†',  // ä» 'ä½ä»£ç è®¾è®¡å¹³å°' æ”¹ä¸º 'èµ„æºç®¡ç†'
  // ...
}

// ä¾§è¾¹æ é…ç½®
sidebar: {
  showUserInfo: true,  // ä» false æ”¹ä¸º true,æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
  userInfo: {
    name: '',
    avatar: '',
    role: '',
  },
  // ...
}

// ä¸»é¢˜é…ç½®
theme: {
  sidebarBg: '#2f4050',  // ä» '#001529' æ”¹ä¸º '#2f4050' (ç®¡ç†ç«¯èƒŒæ™¯è‰²)
  headerBg: '#2f4050',   // ä» '#ffffff' æ”¹ä¸º '#2f4050' (ç®¡ç†ç«¯èƒŒæ™¯è‰²)
  // ...
}
```

---

### 2. è·¯ç”±éš”ç¦»é…ç½®

#### 2.1 è®¾è®¡ç«¯è·¯ç”± (Designer)

**æ–‡ä»¶**: `src/modules/designer/router/index.ts`

**è·¯ç”±å‰ç¼€**: `/designer`

**è·¯ç”±åˆ—è¡¨**:

| è·¯å¾„                      | è·¯ç”±åç§°                     | ç»„ä»¶               | è¯´æ˜                                               |
| ------------------------- | ---------------------------- | ------------------ | -------------------------------------------------- |
| `/`                       | -                            | Redirect           | é‡å®šå‘åˆ° `/designer/resource` æˆ– `/designer/login` |
| `/designer/login`         | `DesignerLogin`              | Login              | è®¾è®¡ç«¯ç™»å½•é¡µ                                       |
| `/designer`               | -                            | Layout             | è®¾è®¡ç«¯ä¸»å¸ƒå±€                                       |
| `/designer/resource`      | `DesignerResourceManagement` | ResourceManagement | èµ„æºç®¡ç†é¡µ                                         |
| `/designer/resource/:url` | `DesignerEditor`             | DesignerNew        | è®¾è®¡å™¨ç¼–è¾‘é¡µ                                       |
| `/preview/:id`            | `DesignerPreview`            | Preview            | é¢„è§ˆé¡µé¢                                           |
| `/designer/*`             | `DesignerNotFound`           | NotFound           | è®¾è®¡ç«¯ 404                                         |

**å…³é”®ç‰¹æ€§**:

- æ‰€æœ‰è·¯ç”±åç§°æ·»åŠ  `Designer` å‰ç¼€
- ç™»å½•é¡µè·¯å¾„: `/designer/login`
- é»˜è®¤é¦–é¡µ: `/designer/resource`
- ç‹¬ç«‹çš„ 404 å¤„ç†

#### 2.2 ç®¡ç†ç«¯è·¯ç”± (Admin)

**æ–‡ä»¶**: `src/modules/admin/router/index.ts`

**è·¯ç”±å‰ç¼€**: `/admin`

**è·¯ç”±åˆ—è¡¨**:

| è·¯å¾„               | è·¯ç”±åç§°         | ç»„ä»¶      | è¯´æ˜         |
| ------------------ | ---------------- | --------- | ------------ |
| `/admin/login`     | `AdminLogin`     | Login     | ç®¡ç†ç«¯ç™»å½•é¡µ |
| `/admin`           | `AdminLayout`    | Layout    | ç®¡ç†ç«¯ä¸»å¸ƒå±€ |
| `/admin/dashboard` | `AdminDashboard` | Dashboard | ä»ªè¡¨æ¿       |
| `/admin/*`         | `AdminNotFound`  | NotFound  | ç®¡ç†ç«¯ 404   |

**å…³é”®ç‰¹æ€§**:

- æ‰€æœ‰è·¯ç”±åç§°æ·»åŠ  `Admin` å‰ç¼€
- ç™»å½•é¡µè·¯å¾„: `/admin/login`
- é»˜è®¤é¦–é¡µ: `/admin/dashboard`
- ç‹¬ç«‹çš„ 404 å¤„ç†
- åŠ¨æ€è·¯ç”±é€šè¿‡ `registerDynamicRoutes` æ·»åŠ 

---

## ğŸ¨ è§†è§‰æ•ˆæœå¯¹æ¯”

### ä¿®æ”¹å‰

**è®¾è®¡ç«¯**:

- æ ‡é¢˜: "ä½ä»£ç è®¾è®¡å¹³å°"
- å¤´éƒ¨èƒŒæ™¯: ç™½è‰² (#ffffff)
- ä¾§è¾¹æ èƒŒæ™¯: æ·±è“è‰² (#001529)
- ç”¨æˆ·å¤´åƒ: ä¸æ˜¾ç¤º

### ä¿®æ”¹å

**è®¾è®¡ç«¯**:

- æ ‡é¢˜: "èµ„æºç®¡ç†"
- å¤´éƒ¨èƒŒæ™¯: æ·±ç°è“è‰² (#2f4050) - ä¸ç®¡ç†ç«¯ä¸€è‡´
- ä¾§è¾¹æ èƒŒæ™¯: æ·±ç°è“è‰² (#2f4050) - ä¸ç®¡ç†ç«¯ä¸€è‡´
- ç”¨æˆ·å¤´åƒ: æ˜¾ç¤ºåœ¨ä¾§è¾¹æ é¡¶éƒ¨

---

## ğŸ”’ è·¯ç”±éš”ç¦»æ¶æ„

### éš”ç¦»ç­–ç•¥

```
åº”ç”¨æ ¹è·¯å¾„ (/)
â”œâ”€â”€ è®¾è®¡ç«¯ (/designer/*)
â”‚   â”œâ”€â”€ /designer/login          â†’ è®¾è®¡ç«¯ç™»å½•
â”‚   â”œâ”€â”€ /designer/resource       â†’ èµ„æºç®¡ç†
â”‚   â”œâ”€â”€ /designer/resource/:url  â†’ è®¾è®¡å™¨
â”‚   â””â”€â”€ /preview/:id             â†’ é¢„è§ˆé¡µé¢
â”‚
â””â”€â”€ ç®¡ç†ç«¯ (/admin/*)
    â”œâ”€â”€ /admin/login             â†’ ç®¡ç†ç«¯ç™»å½•
    â”œâ”€â”€ /admin/dashboard         â†’ ä»ªè¡¨æ¿
    â””â”€â”€ /admin/*                 â†’ åŠ¨æ€è·¯ç”±
```

### éš”ç¦»ä¼˜åŠ¿

1. **å‘½åç©ºé—´éš”ç¦»**:

   - è®¾è®¡ç«¯è·¯ç”±åç§°: `Designer*`
   - ç®¡ç†ç«¯è·¯ç”±åç§°: `Admin*`
   - é¿å…è·¯ç”±åç§°å†²çª

2. **è·¯å¾„éš”ç¦»**:

   - è®¾è®¡ç«¯: `/designer/*`
   - ç®¡ç†ç«¯: `/admin/*`
   - æ¸…æ™°çš„ URL ç»“æ„

3. **è®¤è¯éš”ç¦»**:

   - è®¾è®¡ç«¯ä½¿ç”¨ `token` (localStorage)
   - ç®¡ç†ç«¯ä½¿ç”¨ `access_token` (localStorage)
   - ç‹¬ç«‹çš„è®¤è¯çŠ¶æ€

4. **404 å¤„ç†éš”ç¦»**:
   - è®¾è®¡ç«¯: `/designer/*` â†’ `DesignerNotFound`
   - ç®¡ç†ç«¯: `/admin/*` â†’ `AdminNotFound`
   - å„è‡ªå¤„ç†æœªåŒ¹é…è·¯ç”±

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### 1. å¸ƒå±€æµ‹è¯•

#### è®¾è®¡ç«¯å¸ƒå±€

```bash
# è®¿é—®è®¾è®¡ç«¯
http://localhost:5173/designer/resource
```

**æ£€æŸ¥é¡¹**:

- âœ… å¤´éƒ¨æ ‡é¢˜æ˜¾ç¤º "èµ„æºç®¡ç†"
- âœ… å¤´éƒ¨èƒŒæ™¯è‰²ä¸º #2f4050 (æ·±ç°è“è‰²)
- âœ… ä¾§è¾¹æ èƒŒæ™¯è‰²ä¸º #2f4050 (æ·±ç°è“è‰²)
- âœ… ä¾§è¾¹æ é¡¶éƒ¨æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
- âœ… ç”¨æˆ·å¤´åƒåœ¨å±•å¼€/æŠ˜å çŠ¶æ€ä¸‹æ­£å¸¸æ˜¾ç¤º

#### ç®¡ç†ç«¯å¸ƒå±€

```bash
# è®¿é—®ç®¡ç†ç«¯
http://localhost:5173/admin/dashboard
```

**æ£€æŸ¥é¡¹**:

- âœ… å¤´éƒ¨æ ‡é¢˜æ˜¾ç¤º "ç®¡ç†åå°"
- âœ… å¤´éƒ¨èƒŒæ™¯è‰²ä¸º #ffffff (ç™½è‰²)
- âœ… ä¾§è¾¹æ èƒŒæ™¯è‰²ä¸º #2f4050 (æ·±ç°è“è‰²)
- âœ… ä¾§è¾¹æ é¡¶éƒ¨æ˜¾ç¤ºç”¨æˆ·å¤´åƒ

### 2. è·¯ç”±éš”ç¦»æµ‹è¯•

#### è®¾è®¡ç«¯è·¯ç”±

```bash
# 1. è®¿é—®æ ¹è·¯å¾„
http://localhost:5173/
# é¢„æœŸ: é‡å®šå‘åˆ° /designer/resource æˆ– /designer/login

# 2. è®¿é—®è®¾è®¡ç«¯ç™»å½•
http://localhost:5173/designer/login
# é¢„æœŸ: æ˜¾ç¤ºè®¾è®¡ç«¯ç™»å½•é¡µ

# 3. è®¿é—®èµ„æºç®¡ç†
http://localhost:5173/designer/resource
# é¢„æœŸ: æ˜¾ç¤ºèµ„æºç®¡ç†é¡µ (éœ€è¦ç™»å½•)

# 4. è®¿é—®è®¾è®¡å™¨
http://localhost:5173/designer/resource/test-page
# é¢„æœŸ: æ˜¾ç¤ºè®¾è®¡å™¨é¡µé¢ (éœ€è¦ç™»å½•)

# 5. è®¿é—®é¢„è§ˆ
http://localhost:5173/preview/123
# é¢„æœŸ: æ˜¾ç¤ºé¢„è§ˆé¡µé¢ (æ— éœ€ç™»å½•)

# 6. è®¿é—®ä¸å­˜åœ¨çš„è®¾è®¡ç«¯è·¯ç”±
http://localhost:5173/designer/not-exist
# é¢„æœŸ: æ˜¾ç¤ºè®¾è®¡ç«¯ 404 é¡µé¢
```

#### ç®¡ç†ç«¯è·¯ç”±

```bash
# 1. è®¿é—®ç®¡ç†ç«¯ç™»å½•
http://localhost:5173/admin/login
# é¢„æœŸ: æ˜¾ç¤ºç®¡ç†ç«¯ç™»å½•é¡µ

# 2. è®¿é—®ä»ªè¡¨æ¿
http://localhost:5173/admin/dashboard
# é¢„æœŸ: æ˜¾ç¤ºä»ªè¡¨æ¿ (éœ€è¦ç™»å½•)

# 3. è®¿é—®ä¸å­˜åœ¨çš„ç®¡ç†ç«¯è·¯ç”±
http://localhost:5173/admin/not-exist
# é¢„æœŸ: æ˜¾ç¤ºç®¡ç†ç«¯ 404 é¡µé¢
```

### 3. è®¤è¯éš”ç¦»æµ‹è¯•

```javascript
// è®¾è®¡ç«¯è®¤è¯
localStorage.setItem('token', 'designer-token')

// ç®¡ç†ç«¯è®¤è¯
localStorage.setItem('access_token', 'admin-token')

// éªŒè¯ä¸¤ä¸ªç³»ç»Ÿä½¿ç”¨ä¸åŒçš„ token
```

### 4. è·¯ç”±å®ˆå«æµ‹è¯•

#### è®¾è®¡ç«¯å®ˆå«

- æœªç™»å½•è®¿é—® `/designer/resource` â†’ é‡å®šå‘åˆ° `/designer/login`
- å·²ç™»å½•è®¿é—® `/designer/login` â†’ é‡å®šå‘åˆ° `/designer/resource`

#### ç®¡ç†ç«¯å®ˆå«

- æœªç™»å½•è®¿é—® `/admin/dashboard` â†’ é‡å®šå‘åˆ° `/admin/login`
- å·²ç™»å½•è®¿é—® `/admin/login` â†’ ä¿æŒåœ¨ç™»å½•é¡µ (éœ€è¦æ‰‹åŠ¨è·³è½¬)

---

## ğŸ“‹ é…ç½®å¯¹æ¯”

### è®¾è®¡ç«¯ vs ç®¡ç†ç«¯

| é…ç½®é¡¹           | è®¾è®¡ç«¯             | ç®¡ç†ç«¯           |
| ---------------- | ------------------ | ---------------- |
| **æ ‡é¢˜**         | èµ„æºç®¡ç†           | ç®¡ç†åå°         |
| **å¤´éƒ¨èƒŒæ™¯**     | #2f4050            | #ffffff          |
| **ä¾§è¾¹æ èƒŒæ™¯**   | #2f4050            | #2f4050          |
| **æ˜¾ç¤ºç”¨æˆ·å¤´åƒ** | âœ… æ˜¯              | âœ… æ˜¯            |
| **æ˜¾ç¤ºå›¾æ ‡åº“**   | âœ… æ˜¯              | âŒ å¦            |
| **è·¯ç”±å‰ç¼€**     | /designer          | /admin           |
| **ç™»å½•é¡µ**       | /designer/login    | /admin/login     |
| **é»˜è®¤é¦–é¡µ**     | /designer/resource | /admin/dashboard |
| **Token é”®å**   | token              | access_token     |

---

## âœ… å®ŒæˆçŠ¶æ€

### å·²å®ŒæˆåŠŸèƒ½

- âœ… è®¾è®¡ç«¯æ ‡é¢˜æ”¹ä¸º "èµ„æºç®¡ç†"
- âœ… è®¾è®¡ç«¯å¤´éƒ¨èƒŒæ™¯è‰²æ”¹ä¸º #2f4050
- âœ… è®¾è®¡ç«¯ä¾§è¾¹æ èƒŒæ™¯è‰²æ”¹ä¸º #2f4050
- âœ… è®¾è®¡ç«¯ä¾§è¾¹æ æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
- âœ… è®¾è®¡ç«¯è·¯ç”±æ·»åŠ  `/designer` å‰ç¼€
- âœ… ç®¡ç†ç«¯è·¯ç”±æ·»åŠ  `/admin` å‰ç¼€
- âœ… æ‰€æœ‰è·¯ç”±åç§°æ·»åŠ æ¨¡å—å‰ç¼€
- âœ… ç‹¬ç«‹çš„ 404 å¤„ç†
- âœ… ç‹¬ç«‹çš„ç™»å½•é¡µè·¯å¾„
- âœ… ç‹¬ç«‹çš„è®¤è¯ token

### è§†è§‰ç‰¹ç‚¹

- ğŸ¨ ç»Ÿä¸€çš„æ·±ç°è“è‰²ä¸»é¢˜ (#2f4050)
- ğŸ‘¤ æ¸…æ™°çš„ç”¨æˆ·å¤´åƒæ˜¾ç¤º
- ğŸ“± å®Œæ•´çš„å“åº”å¼æ”¯æŒ
- âš¡ æµç•…çš„åŠ¨ç”»æ•ˆæœ
- ğŸ¯ çªå‡ºçš„èµ„æºç®¡ç†ä¸»é¢˜

### æ¶æ„ç‰¹ç‚¹

- ğŸ”’ å®Œå…¨çš„è·¯ç”±éš”ç¦»
- ğŸ—ï¸ æ¸…æ™°çš„å‘½åç©ºé—´
- ğŸ” ç‹¬ç«‹çš„è®¤è¯ç³»ç»Ÿ
- ğŸ¯ ç²¾ç¡®çš„è·¯ç”±åŒ¹é…
- ğŸš€ æ˜“äºç»´æŠ¤å’Œæ‰©å±•

---

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

### 1. ç”¨æˆ·ä¿¡æ¯åŒæ­¥

å½“å‰ç”¨æˆ·ä¿¡æ¯é…ç½®ä¸ºç©ºå¯¹è±¡,å»ºè®®:

```typescript
// åœ¨ç™»å½•æˆåŠŸåæ›´æ–°ç”¨æˆ·ä¿¡æ¯
const userInfo = {
  name: 'ç”¨æˆ·å',
  avatar: 'å¤´åƒURL',
  role: 'è§’è‰²',
}

// æ›´æ–°åˆ°å¸ƒå±€é…ç½®
designerLayoutConfig.sidebar.userInfo = userInfo
```

### 2. è·¯ç”±å®ˆå«å¢å¼º

å»ºè®®æ·»åŠ :

- Token æœ‰æ•ˆæ€§éªŒè¯
- æƒé™æ£€æŸ¥
- è·¯ç”±åˆ‡æ¢æ—¥å¿—
- é”™è¯¯è¾¹ç•Œå¤„ç†

### 3. åŠ¨æ€è·¯ç”±æ”¯æŒ

è®¾è®¡ç«¯å¯èƒ½éœ€è¦åŠ¨æ€è·¯ç”±åŠŸèƒ½:

```typescript
// ç±»ä¼¼ç®¡ç†ç«¯çš„åŠ¨æ€è·¯ç”±æ³¨å†Œ
export function registerDesignerDynamicRoutes(router: Router, routes: RouteRecordRaw[]): void {
  routes.forEach(route => {
    router.addRoute('DesignerLayout', route)
  })
}
```

### 4. è·¯ç”±è¿‡æ¸¡åŠ¨ç”»

æ·»åŠ è·¯ç”±åˆ‡æ¢åŠ¨ç”»:

```vue
<router-view v-slot="{ Component }">
  <transition name="fade" mode="out-in">
    <component :is="Component" />
  </transition>
</router-view>
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç»Ÿä¸€å¸ƒå±€ç³»ç»Ÿæ–‡æ¡£](./README.md)
- [è®¾è®¡ç«¯è·¯ç”±é…ç½®](../../src/modules/designer/router/index.ts)
- [ç®¡ç†ç«¯è·¯ç”±é…ç½®](../../src/modules/admin/router/index.ts)
- [å¸ƒå±€ç±»å‹å®šä¹‰](../../src/core/layout/types.ts)

---

**æ›´æ–°æ—¶é—´**: 2025-10-15  
**æ›´æ–°çŠ¶æ€**: âœ… å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: å¾…æµ‹è¯•
