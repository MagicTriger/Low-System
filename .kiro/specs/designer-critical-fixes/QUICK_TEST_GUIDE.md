# 快速测试指南

## 🚀 开始测试

### 准备工作

1. **刷新浏览器**

   ```
   按 Ctrl + F5 (Windows) 或 Cmd + Shift + R (Mac)
   ```

2. **打开开发者工具**

   ```
   按 F12 或右键 → 检查
   ```

3. **查看控制台**
   - 确保没有错误
   - 应该看到："设计器模块已启动"

---

## ✅ 测试 1: 无限循环修复

### 目标

验证大屏组件可以正常拖拽，不会导致浏览器崩溃

### 步骤

1. **展开大屏组件分类**

   - 在左侧组件库中找到"大屏组件"
   - 点击展开

2. **拖拽数据面板**

   - 拖拽"数据面板"到画布中央
   - 松开鼠标

3. **拖拽大屏容器**

   - 拖拽"大屏容器"到画布中央
   - 松开鼠标

4. **测试其他组件**
   - 拖拽"表格"组件
   - 拖拽"图表"组件

### 预期结果

✅ **成功标志：**

- 组件正常添加到画布
- 浏览器保持响应
- 控制台没有递增的日志
- 可以选中和移动组件
- CPU 使用率正常（< 20%）

❌ **失败标志：**

- 浏览器卡死或崩溃
- 控制台出现大量重复日志
- 无法操作页面

### 截图位置

如果测试失败，请截图：

1. 控制台日志
2. 浏览器任务管理器（显示 CPU 使用率）

---

## ✅ 测试 2: 数据源配置 - 打开弹框

### 目标

验证数据源配置弹框可以正常打开

### 步骤

1. **找到数据源按钮**

   - 在画布工具栏中间位置
   - 图标是数据库图标（三层圆柱）

2. **点击数据源按钮**

   - 点击按钮

3. **观察弹框**
   - 应该看到全屏模态框
   - 左侧有三个 Tab：数据源、数据流、数据操作
   - 右侧有预览区域
   - 底部有操作按钮

### 预期结果

✅ **成功标志：**

- 全屏模态框正常打开
- 布局正确（左侧 600px + 右侧 400px）
- 三个 Tab 可见
- 底部有 4 个按钮：取消、导入配置、导出配置、保存

❌ **失败标志：**

- 弹框没有打开
- 布局错乱
- 缺少组件

---

## ✅ 测试 3: 数据源配置 - 添加 API 数据源

### 目标

验证可以添加 API 类型的数据源

### 步骤

1. **点击添加数据源**

   - 在数据源面板中点击"添加数据源"按钮

2. **填写表单**

   - 数据源名称：`测试 API`
   - 数据源类型：选择 `API 接口`
   - API 地址：`https://jsonplaceholder.typicode.com/users`
   - 请求方法：选择 `GET`

3. **保存**

   - 点击抽屉底部的"保存"按钮

4. **验证**
   - 检查数据源是否出现在列表中
   - 检查卡片显示是否正确

### 预期结果

✅ **成功标志：**

- 抽屉正常打开
- 表单验证正常
- 保存成功提示
- 数据源出现在列表中
- 卡片显示：
  - 名称："测试 API"
  - 类型标签：蓝色 "API"
  - URL 显示正确

❌ **失败标志：**

- 表单验证失败
- 保存失败
- 数据源没有出现在列表中

---

## ✅ 测试 4: 数据源配置 - 编辑数据源

### 目标

验证可以编辑已有的数据源

### 步骤

1. **点击数据源卡片**

   - 点击刚才创建的"测试 API"卡片

2. **修改名称**

   - 将名称改为：`用户列表 API`

3. **保存**

   - 点击"保存"按钮

4. **验证**
   - 检查卡片名称是否更新

### 预期结果

✅ **成功标志：**

- 抽屉打开并显示现有配置
- 修改成功
- 卡片名称更新为"用户列表 API"

---

## ✅ 测试 5: 数据源配置 - 添加静态数据源

### 目标

验证可以添加静态数据类型的数据源

### 步骤

1. **点击添加数据源**

2. **填写表单**

   - 数据源名称：`示例数据`
   - 数据源类型：选择 `静态数据`
   - 静态数据：
     ```json
     [
       { "id": 1, "name": "张三", "age": 25 },
       { "id": 2, "name": "李四", "age": 30 }
     ]
     ```

3. **保存**

### 预期结果

✅ **成功标志：**

- 保存成功
- 数据源出现在列表中
- 类型标签：绿色 "静态"

---

## ✅ 测试 6: 数据源配置 - 搜索功能

### 目标

验证搜索功能正常工作

### 步骤

1. **在搜索框输入**

   - 输入：`用户`

2. **观察列表**

   - 应该只显示包含"用户"的数据源

3. **清除搜索**
   - 点击搜索框的清除按钮
   - 应该显示所有数据源

### 预期结果

✅ **成功标志：**

- 搜索结果正确过滤
- 清除后显示所有数据源

---

## ✅ 测试 7: 数据源配置 - 删除数据源

### 目标

验证可以删除数据源

### 步骤

1. **点击删除按钮**

   - 在"示例数据"卡片上点击删除按钮（垃圾桶图标）

2. **确认删除**

   - 在确认对话框中点击"确定"

3. **验证**
   - 数据源应该从列表中消失

### 预期结果

✅ **成功标志：**

- 显示确认对话框
- 删除成功提示
- 数据源从列表中移除

---

## ✅ 测试 8: 数据源配置 - 导出配置

### 目标

验证可以导出配置为 JSON 文件

### 步骤

1. **点击导出配置按钮**

   - 在弹框底部点击"导出配置"

2. **检查下载**

   - 应该自动下载一个 JSON 文件
   - 文件名格式：`data-config-{timestamp}.json`

3. **打开文件**
   - 用文本编辑器打开下载的文件
   - 检查内容是否正确

### 预期结果

✅ **成功标志：**

- 文件自动下载
- JSON 格式正确
- 包含所有数据源配置

**示例内容：**

```json
{
  "dataSources": {
    "ds_1234567890": {
      "id": "ds_1234567890",
      "name": "用户列表 API",
      "type": "api",
      "config": {
        "url": "https://jsonplaceholder.typicode.com/users",
        "method": "GET"
      }
    }
  },
  "dataFlows": {},
  "operations": {}
}
```

---

## ✅ 测试 9: 数据源配置 - 导入配置

### 目标

验证可以导入配置文件

### 步骤

1. **点击导入配置按钮**

   - 在弹框底部点击"导入配置"

2. **选择文件**

   - 选择刚才导出的 JSON 文件

3. **验证**
   - 应该显示导入成功提示
   - 配置应该合并到现有配置中

### 预期结果

✅ **成功标志：**

- 文件选择器打开
- 导入成功提示
- 配置正确合并

---

## ✅ 测试 10: 数据源配置 - 保存配置

### 目标

验证可以保存配置并关闭弹框

### 步骤

1. **点击保存按钮**

   - 在弹框底部点击"保存"

2. **观察**

   - 应该显示成功提示
   - 弹框应该关闭

3. **重新打开**
   - 再次点击数据源按钮
   - 检查配置是否保存

### 预期结果

✅ **成功标志：**

- 显示"配置已保存"提示
- 弹框关闭
- 重新打开后配置仍然存在

⚠️ **已知限制：**

- 刷新页面后配置会丢失（未实现持久化）

---

## ✅ 测试 11: 表格组件子组件渲染

### 目标

验证表格头和表格行正确渲染在表格内部

### 步骤

1. **拖拽表格组件**

   - 拖拽"表格"到画布

2. **拖拽表格头**

   - 拖拽"表格头"到表格内部
   - 应该看到虚线框提示

3. **拖拽表格行**

   - 拖拽"表格行"到表格内部

4. **验证**
   - 表格头应该在表格顶部
   - 表格行应该在表格头下方
   - 都应该在表格内部，不在外部

### 预期结果

✅ **成功标志：**

- 子组件正确渲染在表格内部
- 布局正确
- 没有子组件在表格外部

---

## 📊 测试结果记录

### 测试通过情况

| 测试项             | 状态      | 备注 |
| ------------------ | --------- | ---- |
| 1. 无限循环修复    | ⬜ 待测试 |      |
| 2. 打开数据源弹框  | ⬜ 待测试 |      |
| 3. 添加 API 数据源 | ⬜ 待测试 |      |
| 4. 编辑数据源      | ⬜ 待测试 |      |
| 5. 添加静态数据源  | ⬜ 待测试 |      |
| 6. 搜索功能        | ⬜ 待测试 |      |
| 7. 删除数据源      | ⬜ 待测试 |      |
| 8. 导出配置        | ⬜ 待测试 |      |
| 9. 导入配置        | ⬜ 待测试 |      |
| 10. 保存配置       | ⬜ 待测试 |      |
| 11. 表格子组件     | ⬜ 待测试 |      |

### 测试环境

- **浏览器：** ******\_******
- **版本：** ******\_******
- **操作系统：** ******\_******
- **测试日期：** ******\_******

---

## 🐛 问题报告模板

如果发现问题，请记录：

### 问题描述

_详细描述问题_

### 重现步骤

1.
2.
3.

### 预期结果

_应该发生什么_

### 实际结果

_实际发生了什么_

### 截图

_如果可能，请附上截图_

### 控制台错误

_如果有错误，请复制控制台信息_

---

## ✅ 测试完成检查清单

测试完成后，请确认：

- [ ] 所有 11 个测试项都已执行
- [ ] 记录了测试结果
- [ ] 如有问题，已记录详细信息
- [ ] 已截图保存关键步骤
- [ ] 已检查控制台是否有错误

---

## 🎉 测试通过标准

**核心功能（必须通过）：**

- ✅ 测试 1: 无限循环修复
- ✅ 测试 2: 打开数据源弹框
- ✅ 测试 3: 添加 API 数据源

**重要功能（建议通过）：**

- ✅ 测试 4-7: 数据源管理
- ✅ 测试 8-9: 配置导入导出

**辅助功能（可选）：**

- ✅ 测试 10: 保存配置
- ✅ 测试 11: 表格子组件

---

**预计测试时间：** 15-20 分钟  
**难度等级：** ⭐⭐ (简单)

祝测试顺利！🚀
