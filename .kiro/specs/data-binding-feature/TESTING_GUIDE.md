# æ•°æ®ç»‘å®šåŠŸèƒ½æµ‹è¯•æŒ‡å—

## ğŸ§ª æµ‹è¯•æ¦‚è¿°

æœ¬æŒ‡å—æä¾›äº†æµ‹è¯•æ•°æ®ç»‘å®šåŠŸèƒ½çš„è¯¦ç»†æ­¥éª¤å’Œæ£€æŸ¥æ¸…å•ã€‚

## âœ… æµ‹è¯•æ¸…å•

### 1. æ•°æ®æºé…ç½®å¼¹æ¡†æµ‹è¯•

#### 1.1 æ‰“å¼€å¼¹æ¡†

- [ ] ç‚¹å‡»"æ•°æ®é…ç½®"æŒ‰é’®ï¼Œå¼¹æ¡†æ­£å¸¸æ‰“å¼€
- [ ] å¼¹æ¡†å…¨å±æ˜¾ç¤º
- [ ] æ˜¾ç¤ºä¸‰ä¸ªæ ‡ç­¾é¡µï¼šæ•°æ®æºã€æ•°æ®æµã€æ•°æ®æ“ä½œ

#### 1.2 æ•°æ®æºé¢æ¿

- [ ] ç‚¹å‡»"æ·»åŠ æ•°æ®æº"æŒ‰é’®ï¼ŒæŠ½å±‰æ‰“å¼€
- [ ] å¡«å†™æ•°æ®æºä¿¡æ¯ï¼ˆåç§°ã€ç±»å‹ã€é…ç½®ï¼‰
- [ ] ä¿å­˜æ•°æ®æºï¼Œåˆ—è¡¨ä¸­æ˜¾ç¤ºæ–°æ•°æ®æº
- [ ] ç‚¹å‡»æ•°æ®æºé¡¹ï¼Œå¯ä»¥ç¼–è¾‘
- [ ] ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œæ•°æ®æºè¢«åˆ é™¤
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ

**æµ‹è¯•æ•°æ®**:

```json
{
  "name": "æµ‹è¯•API",
  "type": "api",
  "config": {
    "url": "https://jsonplaceholder.typicode.com/users",
    "method": "GET"
  }
}
```

#### 1.3 æ•°æ®æµé¢æ¿

- [ ] åˆ‡æ¢åˆ°"æ•°æ®æµ"æ ‡ç­¾é¡µ
- [ ] ç‚¹å‡»"æ–°å»ºæ•°æ®æµ"æŒ‰é’®
- [ ] é€‰æ‹©æ•°æ®æº
- [ ] å¡«å†™æ•°æ®æµåç§°å’Œæè¿°
- [ ] ä¿å­˜æ•°æ®æµ
- [ ] æ•°æ®æµæ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- [ ] å¯ä»¥ç¼–è¾‘å’Œåˆ é™¤æ•°æ®æµ

**æµ‹è¯•æ•°æ®**:

```json
{
  "name": "ç”¨æˆ·è¿‡æ»¤",
  "description": "è¿‡æ»¤æ´»è·ƒç”¨æˆ·",
  "sourceId": "æµ‹è¯•APIçš„ID",
  "enabled": true
}
```

#### 1.4 æ•°æ®æ“ä½œé¢æ¿

- [ ] åˆ‡æ¢åˆ°"æ•°æ®æ“ä½œ"æ ‡ç­¾é¡µ
- [ ] ç‚¹å‡»"æ–°å»ºæ“ä½œ"æŒ‰é’®
- [ ] é€‰æ‹©æ“ä½œç±»å‹ï¼ˆCreate/Read/Update/Deleteï¼‰
- [ ] é€‰æ‹©æ•°æ®æº
- [ ] å¡«å†™æ“ä½œåç§°
- [ ] ä¿å­˜æ•°æ®æ“ä½œ
- [ ] æ“ä½œæ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- [ ] å¯ä»¥ç¼–è¾‘å’Œåˆ é™¤æ“ä½œ

**æµ‹è¯•æ•°æ®**:

```json
{
  "name": "è¯»å–ç”¨æˆ·",
  "type": "read",
  "sourceId": "æµ‹è¯•APIçš„ID",
  "enabled": true
}
```

#### 1.5 å¯¼å…¥å¯¼å‡º

- [ ] ç‚¹å‡»"å¯¼å‡ºé…ç½®"æŒ‰é’®
- [ ] é…ç½®æ–‡ä»¶ä¸‹è½½æˆåŠŸ
- [ ] ç‚¹å‡»"å¯¼å…¥é…ç½®"æŒ‰é’®
- [ ] é€‰æ‹©é…ç½®æ–‡ä»¶
- [ ] é…ç½®å¯¼å…¥æˆåŠŸ

#### 1.6 ä¿å­˜åŠŸèƒ½

- [ ] ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
- [ ] æ˜¾ç¤ºæˆåŠŸæç¤º
- [ ] å¼¹æ¡†å…³é—­
- [ ] é…ç½®å·²ä¿å­˜

### 2. å±æ€§é¢æ¿æ•°æ®ç»‘å®šæµ‹è¯•

#### 2.1 æ‰“å¼€æ•°æ®ç»‘å®šé€‰é¡¹å¡

- [ ] é€‰æ‹©ä¸€ä¸ªç»„ä»¶
- [ ] å±æ€§é¢æ¿æ˜¾ç¤º
- [ ] ç‚¹å‡»"æ•°æ®ç»‘å®š"é€‰é¡¹å¡
- [ ] æ˜¾ç¤ºæ•°æ®ç»‘å®šé…ç½®è¡¨å•

#### 2.2 ç›´æ¥ç»‘å®šé…ç½®

- [ ] ç»‘å®šç±»å‹é€‰æ‹©"ç›´æ¥ç»‘å®š"
- [ ] æ•°æ®æºä¸‹æ‹‰æ¡†æ˜¾ç¤ºæ‰€æœ‰æ•°æ®æº
- [ ] é€‰æ‹©ä¸€ä¸ªæ•°æ®æº
- [ ] å¡«å†™å±æ€§è·¯å¾„ï¼ˆå¦‚ï¼šdataï¼‰
- [ ] å¼€å¯è‡ªåŠ¨åŠ è½½
- [ ] ç‚¹å‡»"ä¿å­˜ç»‘å®š"
- [ ] æ˜¾ç¤ºæˆåŠŸæç¤º

**æµ‹è¯•é…ç½®**:

```json
{
  "bindingType": "direct",
  "source": "æµ‹è¯•APIçš„ID",
  "propertyPath": "data",
  "autoLoad": true
}
```

#### 2.3 æ•°æ®æµç»‘å®šé…ç½®

- [ ] ç»‘å®šç±»å‹é€‰æ‹©"æ•°æ®æµç»‘å®š"
- [ ] æ•°æ®æºä¸‹æ‹‰æ¡†æ˜¾ç¤º
- [ ] æ•°æ®æµä¸‹æ‹‰æ¡†æ˜¾ç¤ºï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰
- [ ] é€‰æ‹©æ•°æ®æºå’Œæ•°æ®æµ
- [ ] å¡«å†™å±æ€§è·¯å¾„
- [ ] è®¾ç½®åˆ·æ–°é—´éš”ï¼ˆå¦‚ï¼š30000ï¼‰
- [ ] ç‚¹å‡»"ä¿å­˜ç»‘å®š"
- [ ] æ˜¾ç¤ºæˆåŠŸæç¤º

**æµ‹è¯•é…ç½®**:

```json
{
  "bindingType": "dataflow",
  "source": "æµ‹è¯•APIçš„ID",
  "dataFlowId": "æ•°æ®æµID",
  "propertyPath": "data",
  "autoLoad": true,
  "refreshInterval": 30000
}
```

#### 2.4 æ‰‹åŠ¨ç»‘å®šé…ç½®

- [ ] ç»‘å®šç±»å‹é€‰æ‹©"æ‰‹åŠ¨ç»‘å®š"
- [ ] é€‰æ‹©æ•°æ®æº
- [ ] è‡ªåŠ¨åŠ è½½å…³é—­
- [ ] ç‚¹å‡»"ä¿å­˜ç»‘å®š"
- [ ] æ˜¾ç¤ºæˆåŠŸæç¤º

#### 2.5 è½¬æ¢è¡¨è¾¾å¼

- [ ] å¡«å†™è½¬æ¢è¡¨è¾¾å¼ï¼ˆå¦‚ï¼švalue.toUpperCase()ï¼‰
- [ ] ä¿å­˜ç»‘å®š
- [ ] è¡¨è¾¾å¼å·²ä¿å­˜

#### 2.6 æ¸…é™¤ç»‘å®š

- [ ] ç‚¹å‡»"æ¸…é™¤ç»‘å®š"æŒ‰é’®
- [ ] æ˜¾ç¤ºæˆåŠŸæç¤º
- [ ] ç»‘å®šé…ç½®è¢«æ¸…ç©º

#### 2.7 æµ‹è¯•ç»‘å®š

- [ ] é…ç½®å¥½ç»‘å®š
- [ ] ç‚¹å‡»"æµ‹è¯•ç»‘å®š"æŒ‰é’®
- [ ] æ˜¾ç¤ºæµ‹è¯•ç»“æœ

### 3. ç®¡ç†å™¨åŠŸèƒ½æµ‹è¯•

#### 3.1 DataBindingManager

```typescript
import { DataBindingManager } from '@/core/renderer/designer/managers'

const manager = new DataBindingManager()

// æµ‹è¯•åˆ›å»ºç»‘å®š
manager.createBinding('control_1', 'æµ‹è¯•ç»„ä»¶', 'Table', {
  source: 'ds_1',
  bindingType: 'direct',
  autoLoad: true,
})

// æµ‹è¯•è·å–ç»‘å®š
const binding = manager.getBinding('control_1')
console.assert(binding !== undefined, 'ç»‘å®šåº”è¯¥å­˜åœ¨')

// æµ‹è¯•æ›´æ–°ç»‘å®š
manager.updateBinding('control_1', { refreshInterval: 60000 })

// æµ‹è¯•åˆ é™¤ç»‘å®š
manager.removeBinding('control_1')
console.assert(manager.getBinding('control_1') === undefined, 'ç»‘å®šåº”è¯¥è¢«åˆ é™¤')
```

#### 3.2 DataFlowManager

```typescript
import { DataFlowManager } from '@/core/renderer/designer/managers'

const manager = new DataFlowManager()

// æµ‹è¯•åˆ›å»ºæ•°æ®æµ
const flow = manager.createDataFlow({
  name: 'æµ‹è¯•æ•°æ®æµ',
  sourceId: 'ds_1',
  transforms: [],
})

console.assert(flow.id !== undefined, 'æ•°æ®æµåº”è¯¥æœ‰ID')

// æµ‹è¯•æ·»åŠ è½¬æ¢
manager.addTransform(flow.id, {
  id: 'transform_1',
  type: 'filter',
  enabled: true,
  config: {
    type: 'filter',
    conditions: [{ field: 'age', operator: 'gte', value: 18 }],
    logic: 'AND',
  },
})

// æµ‹è¯•è·å–æ•°æ®æµ
const retrieved = manager.getDataFlow(flow.id)
console.assert(retrieved?.transforms.length === 1, 'åº”è¯¥æœ‰ä¸€ä¸ªè½¬æ¢')

// æµ‹è¯•åˆ é™¤æ•°æ®æµ
manager.deleteDataFlow(flow.id)
console.assert(manager.getDataFlow(flow.id) === undefined, 'æ•°æ®æµåº”è¯¥è¢«åˆ é™¤')
```

#### 3.3 DataActionManager

```typescript
import { DataActionManager } from '@/core/renderer/designer/managers'

const manager = new DataActionManager()

// æµ‹è¯•åˆ›å»ºæ•°æ®æ“ä½œ
const action = manager.createDataAction({
  name: 'æµ‹è¯•æ“ä½œ',
  type: 'read',
  sourceId: 'ds_1',
})

console.assert(action.id !== undefined, 'æ“ä½œåº”è¯¥æœ‰ID')

// æµ‹è¯•è·å–æ“ä½œ
const retrieved = manager.getDataAction(action.id)
console.assert(retrieved !== undefined, 'æ“ä½œåº”è¯¥å­˜åœ¨')

// æµ‹è¯•æŒ‰ç±»å‹è·å–
const readActions = manager.getDataActionsByType('read')
console.assert(readActions.length > 0, 'åº”è¯¥æœ‰è¯»å–æ“ä½œ')

// æµ‹è¯•åˆ é™¤æ“ä½œ
manager.deleteDataAction(action.id)
console.assert(manager.getDataAction(action.id) === undefined, 'æ“ä½œåº”è¯¥è¢«åˆ é™¤')
```

### 4. æ‰§è¡Œå™¨åŠŸèƒ½æµ‹è¯•

#### 4.1 DataFlowEngine

```typescript
import { DataFlowEngine } from '@/core/runtime/DataFlowEngine'

const engine = new DataFlowEngine()

// æµ‹è¯•æ•°æ®
const testData = [
  { id: 1, name: 'Alice', age: 25, status: 'active' },
  { id: 2, name: 'Bob', age: 17, status: 'active' },
  { id: 3, name: 'Charlie', age: 30, status: 'inactive' },
]

// æµ‹è¯•è¿‡æ»¤
const filterFlow = {
  id: 'flow_1',
  name: 'è¿‡æ»¤æµ‹è¯•',
  sourceId: 'ds_1',
  transforms: [
    {
      id: 't1',
      type: 'filter',
      enabled: true,
      config: {
        type: 'filter',
        conditions: [
          { field: 'age', operator: 'gte', value: 18 },
          { field: 'status', operator: 'eq', value: 'active' },
        ],
        logic: 'AND',
      },
    },
  ],
  enabled: true,
  createdAt: Date.now(),
  updatedAt: Date.now(),
}

const result = await engine.execute(filterFlow, testData)
console.assert(result.length === 1, 'åº”è¯¥åªæœ‰ä¸€æ¡è®°å½•')
console.assert(result[0].name === 'Alice', 'åº”è¯¥æ˜¯Alice')

// æµ‹è¯•æ’åº
const sortFlow = {
  id: 'flow_2',
  name: 'æ’åºæµ‹è¯•',
  sourceId: 'ds_1',
  transforms: [
    {
      id: 't1',
      type: 'sort',
      enabled: true,
      config: {
        type: 'sort',
        fields: [{ field: 'name', order: 'asc' }],
      },
    },
  ],
  enabled: true,
  createdAt: Date.now(),
  updatedAt: Date.now(),
}

const sorted = await engine.execute(sortFlow, testData)
console.assert(sorted[0].name === 'Alice', 'ç¬¬ä¸€ä¸ªåº”è¯¥æ˜¯Alice')
console.assert(sorted[1].name === 'Bob', 'ç¬¬äºŒä¸ªåº”è¯¥æ˜¯Bob')
```

#### 4.2 DataActionExecutor

```typescript
import { DataActionExecutor } from '@/core/runtime/DataActionExecutor'

const executor = new DataActionExecutor()

// æµ‹è¯•åˆ›å»ºæ“ä½œ
const createAction = {
  id: 'action_1',
  name: 'åˆ›å»ºæµ‹è¯•',
  type: 'create',
  sourceId: 'ds_1',
  config: {
    type: 'create',
    dataMapping: {
      name: 'form.name',
      email: 'form.email',
    },
  },
  enabled: true,
  createdAt: Date.now(),
  updatedAt: Date.now(),
}

const context = {
  form: {
    name: 'Test User',
    email: 'test@example.com',
  },
}

const result = await executor.execute(createAction, context)
console.assert(result.success === true, 'æ“ä½œåº”è¯¥æˆåŠŸ')
```

### 5. é›†æˆæµ‹è¯•

#### 5.1 å®Œæ•´æµç¨‹æµ‹è¯•

1. [ ] æ‰“å¼€è®¾è®¡å™¨
2. [ ] æ‰“å¼€æ•°æ®é…ç½®å¼¹æ¡†
3. [ ] åˆ›å»ºæ•°æ®æº
4. [ ] åˆ›å»ºæ•°æ®æµ
5. [ ] åˆ›å»ºæ•°æ®æ“ä½œ
6. [ ] ä¿å­˜é…ç½®
7. [ ] é€‰æ‹©ç»„ä»¶
8. [ ] é…ç½®æ•°æ®ç»‘å®š
9. [ ] ä¿å­˜ç»‘å®š
10. [ ] ä¿å­˜è®¾è®¡
11. [ ] é‡æ–°åŠ è½½è®¾è®¡
12. [ ] éªŒè¯é…ç½®å·²æ¢å¤

#### 5.2 æ•°æ®æµè½¬æ¢æµ‹è¯•

1. [ ] åˆ›å»ºåŒ…å«å¤šä¸ªè½¬æ¢æ­¥éª¤çš„æ•°æ®æµ
2. [ ] æµ‹è¯•è¿‡æ»¤è½¬æ¢
3. [ ] æµ‹è¯•æ˜ å°„è½¬æ¢
4. [ ] æµ‹è¯•æ’åºè½¬æ¢
5. [ ] æµ‹è¯•èšåˆè½¬æ¢
6. [ ] éªŒè¯è½¬æ¢ç»“æœæ­£ç¡®

#### 5.3 æ•°æ®ç»‘å®šæµ‹è¯•

1. [ ] åˆ›å»ºç›´æ¥ç»‘å®š
2. [ ] éªŒè¯æ•°æ®åŠ è½½
3. [ ] åˆ›å»ºæ•°æ®æµç»‘å®š
4. [ ] éªŒè¯æ•°æ®è½¬æ¢
5. [ ] æµ‹è¯•è‡ªåŠ¨åˆ·æ–°
6. [ ] éªŒè¯æ•°æ®æ›´æ–°

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæ•°æ®æºåˆ—è¡¨ä¸ºç©º

**åŸå› **: æ•°æ®æºæœªæ­£ç¡®ä¼ é€’ç»™ç»„ä»¶  
**è§£å†³**: æ£€æŸ¥propsä¼ é€’ï¼Œç¡®ä¿dataSourcesæœ‰å€¼

### é—®é¢˜2ï¼šæ•°æ®æµé€‰æ‹©æ¡†ä¸æ˜¾ç¤º

**åŸå› **: ç»‘å®šç±»å‹ä¸æ˜¯"dataflow"  
**è§£å†³**: é€‰æ‹©"æ•°æ®æµç»‘å®š"ç±»å‹

### é—®é¢˜3ï¼šä¿å­˜åé…ç½®ä¸¢å¤±

**åŸå› **: æœªå®ç°æŒä¹…åŒ–  
**è§£å†³**: å®ç°ä¿å­˜å’ŒåŠ è½½é€»è¾‘

### é—®é¢˜4ï¼šç±»å‹é”™è¯¯

**åŸå› **: ç±»å‹å®šä¹‰ä¸åŒ¹é…  
**è§£å†³**: æ£€æŸ¥src/types/index.tsä¸­çš„ç±»å‹å®šä¹‰

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# æ•°æ®ç»‘å®šåŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ä¿¡æ¯

- æµ‹è¯•æ—¥æœŸ: YYYY-MM-DD
- æµ‹è¯•äººå‘˜: [å§“å]
- æµ‹è¯•ç¯å¢ƒ: [å¼€å‘/æµ‹è¯•/ç”Ÿäº§]

## æµ‹è¯•ç»“æœ

### æ•°æ®æºé…ç½®å¼¹æ¡†

- [ ] é€šè¿‡ / [ ] å¤±è´¥
- é—®é¢˜æè¿°:

### å±æ€§é¢æ¿æ•°æ®ç»‘å®š

- [ ] é€šè¿‡ / [ ] å¤±è´¥
- é—®é¢˜æè¿°:

### ç®¡ç†å™¨åŠŸèƒ½

- [ ] é€šè¿‡ / [ ] å¤±è´¥
- é—®é¢˜æè¿°:

### æ‰§è¡Œå™¨åŠŸèƒ½

- [ ] é€šè¿‡ / [ ] å¤±è´¥
- é—®é¢˜æè¿°:

### é›†æˆæµ‹è¯•

- [ ] é€šè¿‡ / [ ] å¤±è´¥
- é—®é¢˜æè¿°:

## å‘ç°çš„é—®é¢˜

1.
2.
3.

## å»ºè®®

1.
2.
3.

## æ€»ä½“è¯„ä»·

- [ ] ä¼˜ç§€
- [ ] è‰¯å¥½
- [ ] ä¸€èˆ¬
- [ ] éœ€è¦æ”¹è¿›
```

## ğŸ¯ æ€§èƒ½æµ‹è¯•

### å¤§æ•°æ®é‡æµ‹è¯•

```typescript
// ç”Ÿæˆæµ‹è¯•æ•°æ®
const largeData = Array.from({ length: 10000 }, (_, i) => ({
  id: i,
  name: `User ${i}`,
  age: Math.floor(Math.random() * 80) + 18,
  status: i % 2 === 0 ? 'active' : 'inactive',
}))

// æµ‹è¯•è¿‡æ»¤æ€§èƒ½
console.time('filter')
const filtered = await engine.execute(filterFlow, largeData)
console.timeEnd('filter')

// æµ‹è¯•æ’åºæ€§èƒ½
console.time('sort')
const sorted = await engine.execute(sortFlow, largeData)
console.timeEnd('sort')

// æµ‹è¯•èšåˆæ€§èƒ½
console.time('aggregate')
const aggregated = await engine.execute(aggregateFlow, largeData)
console.timeEnd('aggregate')
```

### é¢„æœŸæ€§èƒ½æŒ‡æ ‡

- è¿‡æ»¤10000æ¡æ•°æ®: < 100ms
- æ’åº10000æ¡æ•°æ®: < 200ms
- èšåˆ10000æ¡æ•°æ®: < 300ms

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§

- [ ] æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] UIç•Œé¢æ˜¾ç¤ºæ­£ç¡®
- [ ] æ•°æ®æµè½¬æ¢æ­£ç¡®
- [ ] æ•°æ®æ“ä½œæ‰§è¡ŒæˆåŠŸ
- [ ] æ•°æ®ç»‘å®šç”Ÿæ•ˆ

### ç”¨æˆ·ä½“éªŒ

- [ ] ç•Œé¢å‹å¥½ç›´è§‚
- [ ] æ“ä½œæµç•…æ— å¡é¡¿
- [ ] é”™è¯¯æç¤ºæ¸…æ™°
- [ ] è¡¨å•éªŒè¯å®Œå–„

### ä»£ç è´¨é‡

- [ ] æ— TypeScripté”™è¯¯
- [ ] æ— è¿è¡Œæ—¶é”™è¯¯
- [ ] ä»£ç è§„èŒƒç»Ÿä¸€
- [ ] æ³¨é‡Šå®Œæ•´æ¸…æ™°

### æ–‡æ¡£å®Œæ•´æ€§

- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] ä½¿ç”¨ç¤ºä¾‹æ¸…æ™°
- [ ] é›†æˆæŒ‡å—è¯¦ç»†
- [ ] æµ‹è¯•æŒ‡å—å®Œå–„

---

**æ›´æ–°æ—¥æœŸ**: 2025-10-11  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… æµ‹è¯•æŒ‡å—å·²å®Œæˆ
